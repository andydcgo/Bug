<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BugLens ‚Äî Insect Classifier</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@400;500&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d0f0a;
    --surface: #141710;
    --border: #2a2f1e;
    --accent: #a8c45a;
    --accent2: #f0c84a;
    --text: #e8ead8;
    --muted: #6b7055;
    --danger: #e05c3a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Organic background texture */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
      radial-gradient(ellipse 60% 40% at 20% 10%, rgba(168,196,90,0.07) 0%, transparent 60%),
      radial-gradient(ellipse 50% 60% at 80% 80%, rgba(240,200,74,0.05) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 860px;
    margin: 0 auto;
    padding: 0 24px;
  }

  /* HEADER */
  header {
    padding: 48px 0 32px;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
    margin-bottom: 56px;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .logo-mark {
    width: 44px;
    height: 44px;
    background: var(--accent);
    border-radius: 50% 50% 50% 20%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    animation: breathe 4s ease-in-out infinite;
  }

  @keyframes breathe {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.06); }
  }

  .logo-text h1 {
    font-family: 'DM Serif Display', serif;
    font-size: 28px;
    color: var(--text);
    letter-spacing: -0.5px;
  }

  .logo-text p {
    font-size: 12px;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .api-badge {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--muted);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 4px 10px;
  }

  /* MAIN HERO */
  .hero {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    margin-bottom: 48px;
  }

  @media (max-width: 640px) {
    .hero { grid-template-columns: 1fr; }
  }

  /* DROP ZONE */
  .drop-zone {
    aspect-ratio: 1;
    border: 2px dashed var(--border);
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    background: var(--surface);
  }

  .drop-zone:hover, .drop-zone.dragover {
    border-color: var(--accent);
    background: rgba(168,196,90,0.04);
  }

  .drop-zone.has-image {
    border-color: var(--accent);
    border-style: solid;
  }

  .drop-zone img#preview {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 18px;
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .drop-zone img#preview.visible {
    opacity: 1;
  }

  .drop-icon {
    font-size: 48px;
    opacity: 0.4;
    transition: opacity 0.3s;
  }

  .drop-hint {
    text-align: center;
    transition: opacity 0.3s;
  }

  .drop-hint strong {
    display: block;
    font-size: 15px;
    color: var(--text);
    margin-bottom: 4px;
  }

  .drop-hint span {
    font-size: 12px;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
  }

  .drop-zone.has-image .drop-icon,
  .drop-zone.has-image .drop-hint {
    opacity: 0;
    pointer-events: none;
  }

  input[type="file"] { display: none; }

  /* RESULTS PANEL */
  .results-panel {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .api-key-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 18px;
  }

  .api-key-section label {
    display: block;
    font-size: 11px;
    font-family: 'DM Mono', monospace;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 8px;
  }

  .api-key-section input {
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px 14px;
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    outline: none;
    transition: border-color 0.2s;
  }

  .api-key-section input:focus {
    border-color: var(--accent);
  }

  .api-key-section input::placeholder {
    color: var(--muted);
  }

  .classify-btn {
    background: var(--accent);
    color: #0d0f0a;
    border: none;
    border-radius: 12px;
    padding: 16px 24px;
    font-family: 'DM Sans', sans-serif;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    letter-spacing: -0.2px;
  }

  .classify-btn:hover:not(:disabled) {
    background: #bcd66a;
    transform: translateY(-1px);
    box-shadow: 0 8px 24px rgba(168,196,90,0.3);
  }

  .classify-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .classify-btn .spinner {
    width: 16px;
    height: 16px;
    border: 2px solid rgba(0,0,0,0.3);
    border-top-color: #0d0f0a;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    display: none;
  }

  .classify-btn.loading .spinner { display: block; }
  .classify-btn.loading .btn-text { display: none; }

  @keyframes spin { to { transform: rotate(360deg); } }

  /* RESULT CARD */
  .result-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 20px;
    flex: 1;
    min-height: 160px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    opacity: 0;
    transform: translateY(8px);
    transition: all 0.4s ease;
  }

  .result-card.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .result-card .empty-state {
    text-align: center;
    color: var(--muted);
    font-size: 13px;
    font-family: 'DM Mono', monospace;
  }

  .result-card .empty-state .icon {
    font-size: 32px;
    margin-bottom: 10px;
    opacity: 0.4;
  }

  .result-content { display: none; }
  .result-content.visible { display: block; }

  .result-tag {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--accent);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .result-tag::before {
    content: '';
    width: 6px;
    height: 6px;
    background: var(--accent);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .result-species {
    font-family: 'DM Serif Display', serif;
    font-size: 22px;
    color: var(--text);
    margin-bottom: 4px;
    line-height: 1.2;
  }

  .result-common {
    font-size: 13px;
    color: var(--accent2);
    font-style: italic;
    margin-bottom: 16px;
  }

  .result-details {
    font-size: 13px;
    color: var(--muted);
    line-height: 1.7;
    border-top: 1px solid var(--border);
    padding-top: 14px;
  }

  .confidence-bar-wrap {
    margin: 14px 0 8px;
  }

  .confidence-label {
    display: flex;
    justify-content: space-between;
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    color: var(--muted);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .confidence-bar {
    height: 3px;
    background: var(--border);
    border-radius: 99px;
    overflow: hidden;
  }

  .confidence-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 99px;
    width: 0%;
    transition: width 1s ease 0.3s;
  }

  /* ERROR */
  .error-msg {
    background: rgba(224,92,58,0.1);
    border: 1px solid rgba(224,92,58,0.3);
    border-radius: 10px;
    padding: 14px;
    font-size: 13px;
    color: var(--danger);
    display: none;
    font-family: 'DM Mono', monospace;
  }

  /* HOW IT WORKS */
  .how-section {
    border-top: 1px solid var(--border);
    padding-top: 48px;
    margin-top: 16px;
  }

  .how-section h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 22px;
    margin-bottom: 32px;
    color: var(--text);
  }

  .steps {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 48px;
  }

  @media (max-width: 640px) {
    .steps { grid-template-columns: 1fr; }
  }

  .step {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 22px;
  }

  .step-num {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 12px;
  }

  .step h3 {
    font-family: 'DM Serif Display', serif;
    font-size: 17px;
    margin-bottom: 8px;
  }

  .step p {
    font-size: 13px;
    color: var(--muted);
    line-height: 1.6;
  }

  /* GUIDE SECTION */
  .guide-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 32px;
    margin-bottom: 48px;
  }

  .guide-section h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 22px;
    margin-bottom: 8px;
  }

  .guide-section .subtitle {
    color: var(--muted);
    font-size: 13px;
    margin-bottom: 28px;
  }

  .guide-steps {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .guide-step {
    display: flex;
    gap: 20px;
    padding: 20px 0;
    border-bottom: 1px solid var(--border);
  }

  .guide-step:last-child { border-bottom: none; }

  .guide-step-num {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(168,196,90,0.12);
    border: 1px solid var(--accent);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    color: var(--accent);
    flex-shrink: 0;
    margin-top: 2px;
  }

  .guide-step-body h4 {
    font-size: 15px;
    font-weight: 500;
    margin-bottom: 6px;
  }

  .guide-step-body p {
    font-size: 13px;
    color: var(--muted);
    line-height: 1.6;
  }

  .code-snippet {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px 16px;
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    color: var(--accent);
    margin-top: 10px;
    overflow-x: auto;
  }

  .tag-pill {
    display: inline-block;
    background: rgba(168,196,90,0.1);
    border: 1px solid rgba(168,196,90,0.3);
    color: var(--accent);
    border-radius: 6px;
    padding: 2px 8px;
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    margin: 2px;
  }

  footer {
    border-top: 1px solid var(--border);
    padding: 24px 0;
    text-align: center;
    font-size: 12px;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
  }
</style>
</head>
<body>

<div class="container">
  <header>
    <div class="logo">
      <div class="logo-mark">ü™≤</div>
      <div class="logo-text">
        <h1>BugLens</h1>
        <p>Agricultural Pest Classifier ¬∑ Pest24</p>
      </div>
    </div>
    <div class="api-badge">Pest24 ¬∑ 24 Species</div>
  </header>

  <!-- CLASSIFIER -->
  <div class="hero">
    <div>
      <label for="fileInput">
        <div class="drop-zone" id="dropZone">
          <img id="preview" alt="Preview" />
          <div class="drop-icon">üîç</div>
          <div class="drop-hint">
            <strong>Drop a photo here</strong>
            <span>or click to browse ¬∑ JPG, PNG, WEBP</span>
          </div>
        </div>
      </label>
      <input type="file" id="fileInput" accept="image/*">
    </div>

    <div class="results-panel">
      <div class="api-key-section">
        <label>Anthropic API Key</label>
        <input type="password" id="apiKey" placeholder="sk-ant-api03-..." autocomplete="off" value="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">
      </div>

      <button class="classify-btn" id="classifyBtn" disabled>
        <div class="spinner"></div>
        <span class="btn-text">üî¨ Classify Insect</span>
      </button>

      <div class="error-msg" id="errorMsg"></div>

      <div class="result-card" id="resultCard">
        <div class="empty-state">
          <div class="icon">ü¶ã</div>
          Upload a photo and click Classify to identify the insect species
        </div>
        <div class="result-content" id="resultContent">
          <div class="result-tag">Species Identified</div>
          <div class="result-species" id="speciesName">‚Äî</div>
          <div class="result-common" id="commonName">‚Äî</div>
          <div class="confidence-bar-wrap">
            <div class="confidence-label">
              <span>Confidence</span>
              <span id="confidenceVal">‚Äî</span>
            </div>
            <div class="confidence-bar">
              <div class="confidence-fill" id="confidenceFill"></div>
            </div>
          </div>
          <div class="result-details" id="resultDetails">‚Äî</div>
        </div>
      </div>
    </div>
  </div>

  <!-- HOW IT WORKS -->
  <div class="how-section">
    <h2>How it works</h2>
    <div class="steps">
      <div class="step">
        <div class="step-num">Step 01</div>
        <h3>Upload Photo</h3>
        <p>Drag and drop or browse for a photo of a pest ‚Äî from your Pest24 dataset or a field photo.</p>
      </div>
      <div class="step">
        <div class="step-num">Step 02</div>
        <h3>AI Analysis</h3>
        <p>Claude Vision matches the photo against all 24 Pest24 species using body shape, colour, and wing patterns.</p>
      </div>
      <div class="step">
        <div class="step-num">Step 03</div>
        <h3>Get Results</h3>
        <p>Receive the species name, confidence score, key identifying features, and which crops it damages.</p>
      </div>
    </div>
  </div>

  <!-- TRAINING YOUR OWN MODEL GUIDE -->
  <div class="guide-section">
    <h2>Train Your Own Model on Kaggle Data</h2>
    <p class="subtitle">Follow these steps to build a custom classifier trained on your specific dataset ‚Äî no deep ML expertise needed</p>

    <div class="guide-steps">
      <div class="guide-step">
        <div class="guide-step-num">1</div>
        <div class="guide-step-body">
          <h4>Prepare Your Kaggle Dataset</h4>
          <p>Download your dataset. Make sure images are organized into folders by species name ‚Äî this is the standard format most tools expect.</p>
          <div class="code-snippet">
            dataset/<br>
            &nbsp;&nbsp;‚îú‚îÄ‚îÄ monarch_butterfly/<br>
            &nbsp;&nbsp;‚îú‚îÄ‚îÄ ladybug/<br>
            &nbsp;&nbsp;‚îî‚îÄ‚îÄ dragonfly/
          </div>
        </div>
      </div>

      <div class="guide-step">
        <div class="guide-step-num">2</div>
        <div class="guide-step-body">
          <h4>Use Google Teachable Machine (Zero Code)</h4>
          <p>Go to <strong>teachablemachine.withgoogle.com</strong> ‚Üí New Project ‚Üí Image Project. Upload your folders per class. Train in the browser for free. No coding needed. Export as a TensorFlow.js model.</p>
          <div style="margin-top:10px;">
            <span class="tag-pill">Free</span>
            <span class="tag-pill">No Code</span>
            <span class="tag-pill">Browser-based</span>
          </div>
        </div>
      </div>

      <div class="guide-step">
        <div class="guide-step-num">3</div>
        <div class="guide-step-body">
          <h4>Or Use Roboflow (More Control)</h4>
          <p>Upload your dataset to <strong>roboflow.com</strong>, annotate if needed, then train using their hosted AutoML. Generates a hosted API endpoint you can call from any web app.</p>
          <div style="margin-top:10px;">
            <span class="tag-pill">Free Tier</span>
            <span class="tag-pill">Hosted API</span>
            <span class="tag-pill">Low Code</span>
          </div>
        </div>
      </div>

      <div class="guide-step">
        <div class="guide-step-num">4</div>
        <div class="guide-step-body">
          <h4>Swap the API in This Web App</h4>
          <p>Replace the Claude API call below with your trained model's endpoint from Roboflow or Teachable Machine. The image upload and UI will work exactly the same.</p>
          <div class="code-snippet">
            // Replace with your Roboflow endpoint:<br>
            const response = await fetch(<br>
            &nbsp;&nbsp;"https://detect.roboflow.com/YOUR_MODEL/1",<br>
            &nbsp;&nbsp;{ method: "POST", body: formData }<br>
            );
          </div>
        </div>
      </div>

      <div class="guide-step">
        <div class="guide-step-num">5</div>
        <div class="guide-step-body">
          <h4>Host for Free on GitHub Pages or Netlify</h4>
          <p>Once your web app is working locally, upload the HTML file to GitHub and enable Pages ‚Äî your classifier will be live on the web for anyone to access, for free.</p>
          <div style="margin-top:10px;">
            <span class="tag-pill">GitHub Pages</span>
            <span class="tag-pill">Netlify</span>
            <span class="tag-pill">Free Hosting</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    BugLens ¬∑ Insect Classification Tool ¬∑ Upload clear, well-lit photos for best results
  </footer>
</div>

<script>
  const dropZone = document.getElementById('dropZone');
  const fileInput = document.getElementById('fileInput');
  const preview = document.getElementById('preview');
  const classifyBtn = document.getElementById('classifyBtn');
  const apiKeyInput = document.getElementById('apiKey');
  const resultCard = document.getElementById('resultCard');
  const resultContent = document.getElementById('resultContent');
  const errorMsg = document.getElementById('errorMsg');

  let imageBase64 = null;

  // Drag and drop
  dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('dragover'); });
  dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
  dropZone.addEventListener('drop', e => {
    e.preventDefault();
    dropZone.classList.remove('dragover');
    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith('image/')) handleFile(file);
  });

  fileInput.addEventListener('change', () => {
    if (fileInput.files[0]) handleFile(fileInput.files[0]);
  });

  function handleFile(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      const dataUrl = e.target.result;
      imageBase64 = dataUrl.split(',')[1];
      preview.src = dataUrl;
      preview.classList.add('visible');
      dropZone.classList.add('has-image');
      updateBtn();
    };
    reader.readAsDataURL(file);
  }

  apiKeyInput.addEventListener('input', updateBtn);

  function updateBtn() {
    classifyBtn.disabled = !(imageBase64 && apiKeyInput.value.trim().length > 10);
  }

  resultCard.classList.add('visible');

  classifyBtn.addEventListener('click', async () => {
    const apiKey = apiKeyInput.value.trim();
    errorMsg.style.display = 'none';
    classifyBtn.classList.add('loading');
    classifyBtn.disabled = true;

    try {
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'x-api-key': apiKey,
          'anthropic-version': '2023-06-01',
          'anthropic-dangerous-direct-browser-access': 'true'
        },
        body: JSON.stringify({
          model: 'claude-opus-4-6',
          max_tokens: 600,
          messages: [{
            role: 'user',
            content: [
              {
                type: 'image',
                source: {
                  type: 'base64',
                  media_type: fileInput.files[0]?.type || 'image/jpeg',
                  data: imageBase64
                }
              },
              {
                type: 'text',
                text: `You are an expert agricultural entomologist specialising in crop pest identification. You must classify the insect in this image as one of the 24 pest species from the Pest24 agricultural dataset, which covers the main field crop pests monitored by China's Ministry of Agriculture.

The 24 Pest24 species are:
1. Aphis gossypii (Cotton aphid)
2. Bemisia tabaci (Whitefly)
3. Frankliniella occidentalis (Western flower thrips)
4. Helicoverpa armigera (Cotton bollworm)
5. Spodoptera frugiperda (Fall armyworm)
6. Spodoptera litura (Tobacco cutworm)
7. Mythimna separata (Oriental armyworm)
8. Chilo suppressalis (Rice striped stem borer)
9. Cnaphalocrocis medinalis (Rice leaf roller)
10. Anomala corpulenta (Dark black chafer)
11. Holotrichia oblita (Black chafer)
12. Agrotis ipsilon (Black cutworm)
13. Plutella xylostella (Diamondback moth)
14. Pieris rapae (Cabbage white butterfly)
15. Myzus persicae (Green peach aphid)
16. Nilaparvata lugens (Brown planthopper)
17. Sogatella furcifera (White-backed planthopper)
18. Nephotettix cincticeps (Green rice leafhopper)
19. Locusta migratoria (Migratory locust)
20. Oxya chinensis (Chinese grasshopper)
21. Laodelphax striatellus (Small brown planthopper)
22. Riptortus pedestris (Bean bug)
23. Apolygus lucorum (Green plant bug)
24. Thrips palmi (Melon thrips)

Respond with ONLY a JSON object (no markdown, no extra text) in this exact format:
{
  "scientific_name": "Genus species",
  "common_name": "Common Name",
  "confidence": 85,
  "order": "Order name",
  "crop_damage": "Which crops this pest typically damages",
  "key_features": "2-3 sentences describing the key visual features used to identify this pest",
  "pest24_match": true
}

If the image does not match any of the 24 Pest24 species, still return the closest match but set pest24_match to false and confidence below 40. If not an insect at all, use scientific_name: "Unidentified", common_name: "Not a recognised pest", confidence: 0.`
              }
            ]
          }]
        })
      });

      if (!response.ok) {
        const err = await response.json();
        throw new Error(err.error?.message || `API error ${response.status}`);
      }

      const data = await response.json();
      const text = data.content[0].text;
      const clean = text.replace(/```json|```/g, '').trim();
      const result = JSON.parse(clean);

      // Show result
      document.getElementById('speciesName').textContent = result.scientific_name;
      document.getElementById('commonName').textContent = result.common_name;
      document.getElementById('confidenceVal').textContent = result.confidence + '%';
      document.getElementById('resultDetails').textContent =
        `${result.key_features}${result.crop_damage ? ' ¬∑ Damages: ' + result.crop_damage : ''}${result.order ? ' ¬∑ Order: ' + result.order : ''}${result.pest24_match === false ? ' ‚ö† Not a direct Pest24 match.' : ''}`;

      resultCard.querySelector('.empty-state').style.display = 'none';
      resultContent.classList.add('visible');

      setTimeout(() => {
        document.getElementById('confidenceFill').style.width = result.confidence + '%';
      }, 100);

    } catch (err) {
      errorMsg.textContent = '‚ö† ' + (err.message || 'Classification failed. Check your API key and try again.');
      errorMsg.style.display = 'block';
    } finally {
      classifyBtn.classList.remove('loading');
      updateBtn();
    }
  });
</script>
</body>
</html>
